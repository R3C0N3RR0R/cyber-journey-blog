---
title: Subdomain Enumeration
date: "2025-07-15"
draft: false
---

# üåê Subdomain Enumeration - Cheat Sheet

## üéØ Vue d'ensemble
L'√©num√©ration de sous-domaines permet de d√©couvrir des sous-domaines cach√©s ou oubli√©s d'un domaine cible, r√©v√©lant souvent des applications web, des services ou des points d'entr√©e suppl√©mentaires.

---

## üîç Techniques de D√©couverte

### √ânum√©ration Passive
```bash
# Recherche avec Certificate Transparency
# Pourquoi : D√©couvrir les sous-domaines via les certificats SSL/TLS
curl -s "https://crt.sh/?q=%.target.com&output=json" | jq -r '.[].name_value' | sort -u
curl -s "https://crt.sh/?q=%.target.com" | grep -o 'DNS:.*' | cut -d':' -f2 | sort -u

# Recherche avec VirusTotal
# Pourquoi : Utiliser VirusTotal pour d√©couvrir des sous-domaines
curl -s "https://www.virustotal.com/vtapi/v2/domain/report?apikey=API_KEY&domain=target.com" | jq -r '.subdomains[]'

# Recherche avec SecurityTrails
# Pourquoi : Utiliser SecurityTrails pour l'historique des sous-domaines
curl -s "https://api.securitytrails.com/v1/domain/target.com/subdomains?apikey=API_KEY" | jq -r '.subdomains[]'
```

### √ânum√©ration Active
```bash
# Bruteforce avec ffuf
# Pourquoi : Tester des sous-domaines courants avec force brute
ffuf -u https://FUZZ.target.com -w /usr/share/wordlists/SecLists/Discovery/DNS/subdomains-top1million-5000.txt -mc 200,204,301,302,307,401,403

# Bruteforce avec gobuster
# Pourquoi : Alternative √† ffuf pour le bruteforce de sous-domaines
gobuster dns -d target.com -w /usr/share/wordlists/SecLists/Discovery/DNS/subdomains-top1million-5000.txt

# Bruteforce avec amass
# Pourquoi : Outil complet pour l'√©num√©ration de sous-domaines
amass enum -d target.com -brute -w /usr/share/wordlists/SecLists/Discovery/DNS/subdomains-top1million-5000.txt
```

---

## üõ†Ô∏è Outils d'√ânum√©ration

### Amass
```bash
# Installation d'Amass
# Pourquoi : Installer l'outil Amass pour l'√©num√©ration compl√®te
sudo apt install amass
# Ou via Go
go install -v github.com/owasp-amass/amass/v4/...@master

# √ânum√©ration passive
# Pourquoi : Utiliser les sources passives pour d√©couvrir des sous-domaines
amass enum -passive -d target.com

# √ânum√©ration active
# Pourquoi : Utiliser des techniques actives pour d√©couvrir des sous-domaines
amass enum -active -d target.com -brute

# √ânum√©ration compl√®te
# Pourquoi : Combiner toutes les techniques d'√©num√©ration
amass enum -d target.com -brute -w wordlist.txt -active
```

### Subfinder
```bash
# Installation de Subfinder
# Pourquoi : Outil rapide et efficace pour l'√©num√©ration de sous-domaines
go install -v github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest

# √ânum√©ration simple
# Pourquoi : D√©couvrir des sous-domaines avec Subfinder
subfinder -d target.com

# √ânum√©ration avec wordlist
# Pourquoi : Utiliser une wordlist personnalis√©e
subfinder -d target.com -w wordlist.txt

# √ânum√©ration avec r√©solution DNS
# Pourquoi : R√©soudre les sous-domaines trouv√©s
subfinder -d target.com -silent | dnsx -a -resp-only
```

### Assetfinder
```bash
# Installation d'Assetfinder
# Pourquoi : Outil simple pour l'√©num√©ration de sous-domaines
go install github.com/tomnomnom/assetfinder@latest

# √ânum√©ration avec Assetfinder
# Pourquoi : D√©couvrir des sous-domaines via diff√©rentes sources
assetfinder target.com

# √ânum√©ration avec sous-domaines inclus
# Pourquoi : Inclure les sous-domaines dans la recherche
assetfinder --subs-only target.com
```

---

## üéØ Techniques Avanc√©es

### √ânum√©ration DNS
```bash
# Recherche DNS avec dig
# Pourquoi : Interroger directement les serveurs DNS
dig axfr target.com @ns1.target.com
dig ANY target.com
dig TXT target.com

# Recherche avec nslookup
# Pourquoi : Alternative √† dig pour les requ√™tes DNS
nslookup -type=ANY target.com
nslookup -type=TXT target.com

# Recherche avec host
# Pourquoi : Outil simple pour les requ√™tes DNS
host -t ANY target.com
host -t TXT target.com
```

### √ânum√©ration via les Moteurs de Recherche
```bash
# Recherche Google Dorks
# Pourquoi : Utiliser Google pour d√©couvrir des sous-domaines
site:*.target.com
site:*.target.com -www
site:*.target.com -mail

# Recherche avec Bing
# Pourquoi : Utiliser Bing comme alternative √† Google
site:*.target.com
site:*.target.com -www

# Recherche avec Shodan
# Pourquoi : Utiliser Shodan pour d√©couvrir des services
hostname:*.target.com
ssl:"*.target.com"
```

### √ânum√©ration via les R√©seaux Sociaux
```bash
# Recherche GitHub
# Pourquoi : D√©couvrir des sous-domaines dans les repositories GitHub
site:github.com "target.com"
site:github.com "*.target.com"

# Recherche avec Wayback Machine
# Pourquoi : Utiliser l'historique web pour d√©couvrir des sous-domaines
curl -s "http://web.archive.org/cdx/search/cdx?url=*.target.com&output=json&fl=original&collapse=urlkey" | jq -r '.[]' | grep -o 'https://[^/]*' | sort -u
```

---

## üîß Validation et R√©solution

### R√©solution DNS
```bash
# R√©solution avec dnsx
# Pourquoi : R√©soudre les sous-domaines trouv√©s
echo "subdomain1.target.com" | dnsx -a -resp-only
cat subdomains.txt | dnsx -a -resp-only

# R√©solution avec massdns
# Pourquoi : R√©solution DNS rapide et en masse
massdns -r /usr/share/wordlists/resolvers.txt -t A -o S subdomains.txt

# R√©solution avec nslookup
# Pourquoi : R√©solution DNS simple et fiable
nslookup subdomain.target.com
```

### Validation des Sous-domaines
```bash
# V√©rification HTTP/HTTPS
# Pourquoi : V√©rifier si les sous-domaines sont accessibles via HTTP
httpx -l subdomains.txt -status-code -title
httpx -l subdomains.txt -mc 200,204,301,302,307,401,403

# V√©rification avec curl
# Pourquoi : Tester manuellement les sous-domaines
curl -I http://subdomain.target.com
curl -I https://subdomain.target.com
```

---

## üéØ Post-√ânum√©ration

### Analyse des R√©sultats
```bash
# Tri et nettoyage des r√©sultats
# Pourquoi : Organiser et nettoyer les sous-domaines trouv√©s
cat subdomains.txt | sort -u > clean_subdomains.txt
cat subdomains.txt | grep -v "^\s*$" | sort -u > clean_subdomains.txt

# Analyse des patterns
# Pourquoi : Identifier les patterns dans les noms de sous-domaines
cat subdomains.txt | cut -d'.' -f1 | sort | uniq -c | sort -nr

# Extraction des domaines uniques
# Pourquoi : Extraire les domaines uniques pour analyse
cat subdomains.txt | cut -d'.' -f2- | sort -u
```

### D√©couverte de Services
```bash
# Scan de ports sur les sous-domaines
# Pourquoi : D√©couvrir les services sur les sous-domaines
nmap -sS -p 80,443,8080,8443 subdomain.target.com

# Scan avec masscan
# Pourquoi : Scan rapide de ports sur de nombreux sous-domaines
masscan -p 80,443,8080,8443 -iL subdomains.txt --rate 1000

# Scan avec naabu
# Pourquoi : D√©couverte de ports avec naabu
naabu -l subdomains.txt -p 80,443,8080,8443
```

---

## üõ°Ô∏è Contre-Mesures

### D√©tection
```bash
# Surveillance des requ√™tes DNS
# Pourquoi : D√©tecter les tentatives d'√©num√©ration DNS
tail -f /var/log/dns.log | grep "target.com"
grep "target.com" /var/log/bind/query.log

# Surveillance des acc√®s web
# Pourquoi : D√©tecter les tentatives d'acc√®s aux sous-domaines
tail -f /var/log/apache2/access.log | grep "target.com"
grep "target.com" /var/log/nginx/access.log
```

### Mitigation
```bash
# Configuration DNS s√©curis√©e
# Pourquoi : Configurer DNS pour limiter l'√©num√©ration
# D√©sactiver le transfert de zone
# Limiter les requ√™tes r√©cursives
# Utiliser des rate limiting

# Configuration web
# Pourquoi : Configurer les serveurs web pour limiter l'√©num√©ration
# Redirection des sous-domaines inexistants
# Rate limiting sur les requ√™tes
# Monitoring des acc√®s
```

### Configuration S√©curis√©e
```bash
# Exemple de configuration Apache
# Pourquoi : Configurer Apache pour g√©rer les sous-domaines
<VirtualHost *:80>
    ServerName *.target.com
    Redirect 404 /
</VirtualHost>

# Exemple de configuration nginx
# Pourquoi : Configurer nginx pour g√©rer les sous-domaines
server {
    listen 80;
    server_name ~^.*\.target\.com$;
    return 404;
}
```

---

## üìö Ressources

- **Amass GitHub** : https://github.com/owasp-amass/amass
- **Subfinder GitHub** : https://github.com/projectdiscovery/subfinder
- **Assetfinder GitHub** : https://github.com/tomnomnom/assetfinder
- **HackTricks Subdomain Enumeration** : https://book.hacktricks.xyz/pentesting-web/recon/subdomain-enumeration

---

_Derni√®re mise √† jour : 15 juillet 2025_ 